<nav class="bg-white shadow">
    <div class="container mx-auto px-4">
        <div class="flex justify-between h-16">
            <div class="flex">
                <!-- Logo -->
                <div class="flex-shrink-0 flex items-center">
                    <a href="/" class="text-2xl font-bold text-primary-600">StreamVista</a>
                </div>

                <!-- Navigation Links -->
                <div class="hidden sm:ml-6 sm:flex sm:space-x-8">
                    <a href="/" class="inline-flex items-center px-1 pt-1 text-sm font-medium text-gray-900">
                        <i class="ph-house-simple mr-2"></i>
                        Home
                    </a>
                    <% if (isAuthenticated) { %>
                        <a href="/dashboard" class="inline-flex items-center px-1 pt-1 text-sm font-medium text-gray-500 hover:text-gray-900">
                            <i class="ph-chart-line mr-2"></i>
                            Analytics
                        </a>
                    <% } %>
                </div>
            </div>

            <!-- Right side -->
            <div class="flex items-center">
                <% if (isAuthenticated) { %>
                    <!-- Upload Button -->
                    <a href="/videos/upload" class="inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 mr-4">
                        <i class="ph-upload-simple mr-2"></i>
                        Upload
                    </a>

                    <!-- User Dropdown -->
                    <div class="ml-3 relative">
                        <div class="relative">
                            <button type="button" onclick="toggleUserMenu()" class="flex items-center max-w-xs rounded-full text-sm focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500">
                                <img class="h-8 w-8 rounded-full" src="<%= user.avatar || '/images/default-avatar.png' %>" alt="<%= user.name %>">
                                <span class="ml-2 text-gray-700"><%= user.name %></span>
                                <i class="ph-caret-down ml-2"></i>
                            </button>
                        </div>

                        <!-- Dropdown Menu -->
                        <div id="userMenu" class="hidden origin-top-right absolute right-0 mt-2 w-48 rounded-md shadow-lg py-1 bg-white ring-1 ring-black ring-opacity-5">
                            <a href="/dashboard" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">
                                <i class="ph-chart-line mr-2"></i>
                                Dashboard
                            </a>
                            <a href="/profile" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">
                                <i class="ph-user mr-2"></i>
                                Profile
                            </a>
                            <a href="/users/settings" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">
                                <i class="ph-gear mr-2"></i>
                                Settings
                            </a>
                            <div class="border-t border-gray-100"></div>
                            <a href="/users/logout" class="block px-4 py-2 text-sm text-red-600 hover:bg-gray-100">
                                <i class="ph-sign-out mr-2"></i>
                                Logout
                            </a>
                        </div>
                    </div>
                <% } else { %>
                    <a href="/users/login" class="inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-primary-600 bg-white hover:bg-gray-50 mr-2">
                        <i class="ph-sign-in mr-2"></i>
                        Login
                    </a>
                    <a href="/users/register" class="inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700">
                        <i class="ph-user-plus mr-2"></i>
                        Register
                    </a>
                <% } %>
            </div>
        </div>
    </div>
</nav>

<script>
    function toggleUserMenu() {
        const menu = document.getElementById('userMenu');
        menu.classList.toggle('hidden');
    }

    // Close the menu when clicking outside
    document.addEventListener('click', function(event) {
        const menu = document.getElementById('userMenu');
        const button = event.target.closest('button');
        if (!button && !menu.classList.contains('hidden')) {
            menu.classList.add('hidden');
        }
    });
</script> 